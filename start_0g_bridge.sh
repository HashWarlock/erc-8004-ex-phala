#!/bin/bash

# Start 0G Compute Network Inference Bridge
# This script starts the TypeScript bridge that connects Python agents to 0G

cd "$(dirname "$0")/sdk/zerog-bridge"

echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘                                                                          â•‘"
echo "â•‘        Starting 0G Compute Network Inference Bridge...                  â•‘"
echo "â•‘                                                                          â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

# Check if .env exists
if [ ! -f .env ]; then
    echo "âŒ ERROR: .env file not found!"
    echo ""
    echo "Create .env file with:"
    echo "  ZEROG_PRIVATE_KEY=\"your_private_key_here\""
    echo "  ZEROG_RPC_URL=\"https://evmrpc-testnet.0g.ai\""
    echo ""
    echo "Get A0GI tokens from: https://faucet.0g.ai/"
    echo ""
    exit 1
fi

# Check if node_modules exists
if [ ! -d node_modules ]; then
    echo "ğŸ“¦ Installing dependencies..."
    npm install
fi

echo ""
echo "ğŸš€ Starting bridge server..."
echo ""

npm start
